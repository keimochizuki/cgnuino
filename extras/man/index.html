<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>cgnuino: General introduction of cgnuino library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">cgnuino
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">General introduction of cgnuino library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#s1">Before getting started</a><ul><li class="level2"><a href="#s1ss1">Pro: easy programming</a></li>
<li class="level2"><a href="#s1ss2">Pro: convenient signal in/out (IO)</a></li>
<li class="level2"><a href="#s1ss3">Pro: low cost</a></li>
<li class="level2"><a href="#s1ss4">Con: no graphical display</a></li>
<li class="level2"><a href="#s1ss5">Con: data saving</a></li>
<li class="level2"><a href="#s1ss6">Con?: modifying variables</a></li>
</ul>
</li>
<li class="level1"><a href="#s2">Getting started</a><ul><li class="level2"><a href="#s2ss1">How Arduino works</a></li>
<li class="level2"><a href="#s2ss2">Working on cgnuino library</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Kei Mochizuki (<a href="http://researchmap.jp/keimochizuki">http://researchmap.jp/keimochizuki</a>) </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>GNU Lesser General Public License 3</dd></dl>
<p>Copyright (c) 2020 Kei Mochizuki. All right reserved.</p>
<p>This library is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License version 3 as published by the Free Software Foundation.</p>
<p>This library is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.</p>
<p>You should have received a copy of the GNU Lesser General Public License along with this library; if not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.</p>
<dl class="section date"><dt>Date</dt><dd>Last update for this documentation: 2020.08.30</dd></dl>
<h1><a class="anchor" id="s1"></a>
Before getting started</h1>
<p>cgnuino is a library to help cognitive psychologists and neuroscientists to create behavioral tasks using Arduino boards. It provides several (what I hope are) useful functions when you create behavioral tasks with electrical inputs (e.g., button press, lever move, etc) and outputs (e.g., LED light, beep sound, etc). However, right now before getting started, you might be even uncertain whether Arduino is the best option to implement your task. Thus I start with pros and cons of using Arduino in controlling behavioral tasks for cognitive psychology and neuroscience.</p>
<h2><a class="anchor" id="s1ss1"></a>
Pro: easy programming</h2>
<p>First of all, writing programs with Arduino system is definitely easy for beginners compared with other programming languages such as Python, Ruby, C# and so on. Arduino uses classical C and C++ languages in writing program files, which are called Sketches in this platform. Drivers for Arduino boards are distributed with Arduino IDE, which is a useful and easy-to-handle software you can use to write your own Sketch. If you have any experience in writing computer programs with other languages, it should be fairly easy to write Arduino Sketches. And if you are not familiar with programming languages, Arduino can be still a good starting point due to its simplicity.</p>
<h2><a class="anchor" id="s1ss2"></a>
Pro: convenient signal in/out (IO)</h2>
<p>Standard Arduino boards have general purpose in/out (GPIO) pins, with which you can read or put out high (5V) or low (0V) voltage signal. (Be careful that some Arduino boards use 3.3V for high digital signal instead of 5V.) Using these GPIO pins as digital-out, you are able to directly turn on and off electrical parts using DC 5V power supply (e.g., lighting a LED), as well as to control instruments that have external triggering mechanism (e.g., applying predetermined set of electrical stimulation train at the rising edge of 5V input). Using GPIO pins as digital-in, you can easily monitor the participant's button press or lever manipulation. Arduino boards often have analog input pins, and some also have analog output pins, with which you can read or put out arbitrary voltage ranging from 0V to 5V, instead of binary low or high voltage.</p>
<p>Since these pins are physically implemented on Arduino boards as either pin sockets or soldering holes, using them is quite straightforward; you can simply connect the devise to Arduino. On the other hand, if you use a programming language running on a standard PC to execute your behavioral task, using such digital and analog IOs is not so easy, and you will normally need additional A/D or D/A converter to allow your computer to communicate with external instruments.</p>
<h2><a class="anchor" id="s1ss3"></a>
Pro: low cost</h2>
<p>In general, Arduino boards are inexpensive. In addition, since Arduino is an open-source project, there are even cheaper Arduino-compatible boards from third parties (although I personally recommend official products). On writing programs with Arduino, you (of course) need a PC. However, it does not require any high performance like high-end CPU, massive RAM memory or gorgeous video card. Just a common PC with ordinary performance will do, with any of Linux, Mac or Windows operating system.</p>
<h2><a class="anchor" id="s1ss4"></a>
Con: no graphical display</h2>
<p>The biggest disadvantage of Arduino must be the absence of graphical display. Yes, you can find several liquid crystal displays and OLED displays that can be used with Arduino, none of which will satisfy the use of graphical display to present visual stimuli in psychological experiments. (i.e., They are not something you, as a normal psychologist or neuroscientist, expect to be by the words of "graphical display".) If you want to use visual stimuli just for the purpose of, for example, instructing timing of actions and telling trial conditions to the participant, then LEDs with different colors may be enough to do the job. However, if you wish to present visual stimuli in a normal sense for psychological experiments, then Arduino is not a suitable option for your task. In this case, you should choose other programming language working on a standard computer with graphical display. One of the popular options for such usage would be Expyriment library working on Python (which I prefer), and Psychophysics Toolbox working on Matlab (which I @#$%!).</p>
<h2><a class="anchor" id="s1ss5"></a>
Con: data saving</h2>
<p>After compiling your code (i.e., Sketch) and sending it to the on-board chip, Arduino runs in a "stand alone" way. USB connection is commonly used to power running Arduino, but is not necessary and can be thrown away if external DC supply is provided. When the power supply is out, Arduino stops running and all the temporal values of variables are flushed (except for a few exceptions I don't mention here). Therefore, to record the participant's behavioral performance, you need certain external mechanics to save it on a non-volatile storage in some way.</p>
<p>One of the ways is to use USB serial connection to write task information from Arduino to PC as a text file. Arduino can easily emit text to a serial port (by <code>Serial.println</code> function) to show it on a serial monitor application running on the connected PC. You may be familiar with this feature through Serial Monitor utility in Arduino IDE. This is useful when you check the behavior of the program, especially during prototyping. However, if you use other serial monitors with automatical saving utility, the same serial interaction mechanism can be used as a "write to a text file" function. Run this kind of application in parallel with a connected Arduino board, and all the text from Arduino's serial connection is automatically save to a text file. I personally use this method for my own experiments and it is working quite well.</p>
<p>Another alternative for data saving is the usage of a SD (or nowadays more common micro-SD) card. Standard Arduino boards do not have SD card slot. But there are several breakout boards (small external boards that can be connected to Arduino) for SD card. Also, Arduino has a library named <code>SD</code> that provides a simple IO interfaces to SD card. Using these materials, you can save the task performance to a text file on SD card, which is later transported into your PC and analyzed.</p>
<p>There is also another possibility for you to use WiFi connection and save your data to remote server computer. For example, there are some Arduino-compatible boards with a built-in WiFi interface such as ESP-WROOM-02 and ESP-WROOM-32. These will allow you to emit texts from your board to remote computer, enabling non-volatile saving of your data. However, the hardware of these boards is a bit complicated compared with standard genuine Arduino, and working on WiFi network in addition to building a web server should be a bother for beginners. Also, not many people will wish their unpublished data (including confidential information and task performance from the participants) be recorded through the Internet. So I personally do not think that this option is much feasible. Saving data to a local server in a private Local Area Network through WiFi can be a bit conceivable, although it does not seem to have a distinct advantage over just recording data through wired USB serial connection.</p>
<h2><a class="anchor" id="s1ss6"></a>
Con?: modifying variables</h2>
<p>In human psychological experiments, variables in the program normally do not require any "manpowered" monitoring during task performance. Constants should remain constant, variables should vary in a way you described in the code. However, especially in animal experiments, there are times one want to change the value of certain variables on-line (i.e., without stopping the task progression). For example, you may want to increase the time length of opening a solenoid that delivers water reward to the animal, when her motivation suddenly starts to collapse during an experiment. In another case, you may want to gradually lengthen the temporal delay in your task during a training session. This is why many commercial specialized systems for behavioral task control in animals have certain on-line mechanism which allow you to modify variables during an experiment.</p>
<p>Because Arduino Sketches are essentially "compiled language", this kind of flexible variable modification is more or less difficult within a standard usage. However, the same is in fact true for Arduino's other counterparts such as Expyriment on Python or Psychophysics Toolbox on Matlab. You may need some uncouth hacks to send commands to running task program through secondary PC or something. In cgnuino, you can get rid of this problem by <a class="el" href="classCgnControl.html" title="Communicates with external control apprication running on a secondary PC. ">CgnControl</a> class and embedded conditional branching, but you still need a moderate knowledge on serial communication anyway.</p>
<h1><a class="anchor" id="s2"></a>
Getting started</h1>
<p>In the previous section, I briefly explained pros and cons in using Arduino for the implementation of behavioral tasks in cognitive psychology and neuroscience. Because you are still continue reading, it is likely that you decided (or at least are interested) to use Arduino for your experiment. Therefore, I now introduce how to create behavioral task on Arduino, and how this library will help your job.</p>
<h2><a class="anchor" id="s2ss1"></a>
How Arduino works</h2>
<p>While some of the readers might already have experiences on Arduino programming, others may be completely new to computer programming itself. Since there are many comprehensive tutorials and reviews for Arduino beginners on the internet, here I focus only a brief introduction to Arduino Sketch.</p>
<p>An Arduino Sketch is always composed of two functions: <code>setup</code> and <code>loop</code>. The contents of <code>setup</code> function are executed only once after Arduino is terned on. Afterward, the contents of <code>loop</code> function are repeatedly executed. In other words, when the execution of <code>loop</code> function is finished, next <code>loop</code> function is automatically called and starts to be executed. This means that you are going to carry out necessary settings of variables, pin modes and/or <code>Serial</code> connections in <code>setup</code> function. The progress of behavioral task itself (within a trial as well as transitions among trials) will then be controlled by repeating <code>loop</code> function. The execution of one <code>loop</code> function can be seen as a time resolution of events that can be detected or determined by Arduino Sketch, which is also called as a "cycle" or "tick" in other occasion. However, according to Arduino's naming basics shown above, I'm going to call it a "loop" from now on.</p>
<p>The other important thing you need to remember is that, the values of local variables in <code>loop</code> function are <b>NOT</b> maintained through different loops. Therefore, if you want the values of some variables to be taken over through loops, all of these variables must be defined as grobal variables. In other words, define these variables outside any functions, conventionally at the very beginning of your Sketch. This surely sound very silly for users with prior programming experiences, but it is anyway the behavior of Arduino.</p>
<h2><a class="anchor" id="s2ss2"></a>
Working on cgnuino library</h2>
<p>Now I finally explain how cgnuino library will help you implement your task on Arduino. Here I just briefly overview how you can create behavioral tasks in Arduino, and which cgnuino class may help each stage of task implementation. Detailed explanation of the classes and methods of the library is available in the linked pages. The list of all classes and files of the library is accessed from Classes and Files tabs on the top menu of this page. Also I prepared a few example Sketches that show the usage of cgnuino classes. These are available in <code>examples</code> directory or from the menu bar of Arduino IDE after the library is correctly installed, in a way something like File &gt; Examples &gt; cgnuino.</p>
<p>Usually a trial in a behavioral task is composed of several task periods (also called as epochs in some cases). For example, a pre-trial period is followed by a cue period, in which a visual cue is presented. The participant needs to release the button press in a succeeding response period, after which a post-trial period follows. As in this example, a trial is divided into numbers of task periods in which different events occur or different actions are required. Some of them can have temporal limit (e.g., response is required within 800 ms), while others can last unlimitedly (e.g., next trial starts after the participant's voluntary button press). This kind of progression of task periods can be easily managed by <a class="el" href="classCgnPeriod.html" title="Remembers current task period and its time constraint. ">CgnPeriod</a> class.</p>
<p>Using Arduino's <code>digitalRead</code> function, you can read voltage input as high (5V [or 3.3V]) or low (0V) state. This, in addition to pull-up or pull-down mechanism, allows you to record participant's button press and release as boolean (<code>HIGH/LOW</code> or <code>true/false</code>) value. However, in order to to detect the timing of button press and release, you need to monitor the change of the acquired value instead of the current state of the button. Therefore, in most cases you need to buffer the value of digital input and compared it with the current value. Also, because of the mechanical noise, the value of digital input can be unstable at the time of button manipulation (a phenomenun known as chattering or ripple). Thus you will sometimes want to ignore changes of digital input, during a short period (a few milliseconds should be enough), right after a change has occured. Using <a class="el" href="classCgnDI.html" title="Offers convenient digital-in buffering. ">CgnDI</a> class, you can perform a set of these stereotypical processing for digital input, for multiple digital-in pins at a time. The same kind of change monitoring for an arbitral boolean value instead of digital-in signals can be performed via <a class="el" href="classCgnLogger.html" title="Logs arbitorary bit change similar to CgnDI class. ">CgnLogger</a> class.</p>
<p>On acquiring participant's actions, you often want to record response times (or reaction times). For this purpose, <a class="el" href="classCgnStopwatch.html" title="Measures time difference in milliseconds. ">CgnStopwatch</a> class provides a easy to calculate temporal discrepancy between two events in millisecond order. You can even create multiple <a class="el" href="classCgnStopwatch.html" title="Measures time difference in milliseconds. ">CgnStopwatch</a> objects (have multiple stopwatches simultaneously) to calculate two or more response times in parallel.</p>
<p>In some tasks, output from Arduino is required to announce task-related information to the participant. This is normally done by a light stimulus using a LED and <code>digitalWrite</code> function, or an auditory tone using a piezo buzzer and <code>tone</code> function. However, these emitted output need to be later turned off manually using <code>digitalWrite</code> or <code>noTone</code> functions. <a class="el" href="classCgnDO.html" title="Emits asynchroneous digital-out. ">CgnDO</a> class provides an easy way to perform such digital output with fixed time length, allowing you an asynchronous task control along with output signals. The same functionality for tone output is provided by <a class="el" href="classCgnTone.html" title="Emits asynchroneous tone output. ">CgnTone</a> class.</p>
<p>These are the basic utilities that will be often used in various behavioral tasks. There are some more classes that may help you in somewhat limited situations. By using these functionalities of cgnuino library, I hope your burden in task construction will become a bit lighter. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Sep 3 2020 17:23:25 for cgnuino by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
