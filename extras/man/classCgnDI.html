<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>cgnuino: CgnDI Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">cgnuino
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classCgnDI-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CgnDI Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Offers convenient digital-in buffering.  
 <a href="classCgnDI.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="cgnuino_8h_source.html">cgnuino.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a65c74487fcfa1f0073476ac6d1e7fc24"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCgnDI.html#a65c74487fcfa1f0073476ac6d1e7fc24">CgnDI</a> (byte, byte=1, byte=NULL, byte=2)</td></tr>
<tr class="memdesc:a65c74487fcfa1f0073476ac6d1e7fc24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a65c74487fcfa1f0073476ac6d1e7fc24">More...</a><br /></td></tr>
<tr class="separator:a65c74487fcfa1f0073476ac6d1e7fc24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95e8d70a404b9d6b05c562cc293ec39c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCgnDI.html#a95e8d70a404b9d6b05c562cc293ec39c">update</a> ()</td></tr>
<tr class="memdesc:a95e8d70a404b9d6b05c562cc293ec39c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates DI buffer by current pin voltages.  <a href="#a95e8d70a404b9d6b05c562cc293ec39c">More...</a><br /></td></tr>
<tr class="separator:a95e8d70a404b9d6b05c562cc293ec39c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6aa03d3373b19a730ebe60c63102e2de"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCgnDI.html#a6aa03d3373b19a730ebe60c63102e2de">on</a> (byte=0)</td></tr>
<tr class="memdesc:a6aa03d3373b19a730ebe60c63102e2de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether <em>i-th</em> DI pin is on (active).  <a href="#a6aa03d3373b19a730ebe60c63102e2de">More...</a><br /></td></tr>
<tr class="separator:a6aa03d3373b19a730ebe60c63102e2de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a398a749f1f599f8c2076be7b8ea0f1c0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCgnDI.html#a398a749f1f599f8c2076be7b8ea0f1c0">off</a> (byte=0)</td></tr>
<tr class="memdesc:a398a749f1f599f8c2076be7b8ea0f1c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether <em>i-th</em> DI pin is off (inactive).  <a href="#a398a749f1f599f8c2076be7b8ea0f1c0">More...</a><br /></td></tr>
<tr class="separator:a398a749f1f599f8c2076be7b8ea0f1c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab177debb1d0d973696230aeabf478b53"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCgnDI.html#ab177debb1d0d973696230aeabf478b53">turnon</a> (byte=0)</td></tr>
<tr class="memdesc:ab177debb1d0d973696230aeabf478b53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether <em>i-th</em> DI pin was turned on in current loop.  <a href="#ab177debb1d0d973696230aeabf478b53">More...</a><br /></td></tr>
<tr class="separator:ab177debb1d0d973696230aeabf478b53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca8bab4f93ed7c9c4aa184de62b2b50f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCgnDI.html#aca8bab4f93ed7c9c4aa184de62b2b50f">turnoff</a> (byte=0)</td></tr>
<tr class="memdesc:aca8bab4f93ed7c9c4aa184de62b2b50f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether <em>i-th</em> DI pin was turned off in current loop.  <a href="#aca8bab4f93ed7c9c4aa184de62b2b50f">More...</a><br /></td></tr>
<tr class="separator:aca8bab4f93ed7c9c4aa184de62b2b50f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21994237460bd0be25a523173e2ba165"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCgnDI.html#a21994237460bd0be25a523173e2ba165">change</a> (byte=0)</td></tr>
<tr class="memdesc:a21994237460bd0be25a523173e2ba165"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether <em>i-th</em> DI pin was changed from previous loop.  <a href="#a21994237460bd0be25a523173e2ba165">More...</a><br /></td></tr>
<tr class="separator:a21994237460bd0be25a523173e2ba165"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38722814960c6459e78e822ee064081d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCgnDI.html#a38722814960c6459e78e822ee064081d">keep</a> (byte=0)</td></tr>
<tr class="memdesc:a38722814960c6459e78e822ee064081d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether <em>i-th</em> DI pin kept unchanged from previous loop.  <a href="#a38722814960c6459e78e822ee064081d">More...</a><br /></td></tr>
<tr class="separator:a38722814960c6459e78e822ee064081d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Digital-in pins make Arduino boards detect signal changes in outer world as high (5V [or 3.3V]) and low (0V) voltage. The standard way to record these signals by Arduino is to use <code>digitalRead</code> function, which returns <code>HIGH</code> or <code>LOW</code> (special constants in Arduino) depending on the incoming signal.</p>
<p>In constructing behavioral tasks, this function can be used to monitor any arbitrary electrical parts or instruments that put out information about their state as a 5V/0V digital (binary) signal. One of the most common cases is to record participant's action as button press, lever manipulation and so on. For example, if you connect a mechanical switch with either pull-up or pull-down resistor, you can monitor the button's push/release state as <code>HIGH</code> or <code>LOW</code> (depending on whether you pulled up or down the pin). Especially in digital inputs on Arduino boards, there is a convenient pin mode called <code>INPUT_PULLUP</code>. This feature sets the designated pin as input mode, and internally connects it to high votage with inbuilt registor about 10k ohm (i.e., pulls up the designated pin). Thus, by inserting a simple single-pole switch to this pin and GND, you can record the state of the switch as <code>HIGH</code> (released) or <code>LOW</code> (pressed) without any external pull-up mechanism.</p>
<div class="fragment"><div class="line">byte pin = 13;</div><div class="line"><span class="keywordtype">bool</span> isReleased;</div><div class="line">pinMode(pin, INPUT_PULLUP);</div><div class="line">isReleased = digitalRead(pin);</div></div><!-- fragment --><p>However, in behavioral tasks, there are often times that you want to know whether the button is pressed and released at this moment (in this loop). In other words, you may want to detect, not only the button's current state, but also the timing of changes of the button press/release. In this case, you need to buffer the previous value from the pin, and compare it with the current pin state read by <code>digitalRead</code> function. Furthermore, there can be multiple of such input like home, center, left and right buttons, etc... These conditions force you to deal with an array of input buffers and repeated comparison processes every time you want to refer to the current, latest values of these inputs.</p>
<p><a class="el" href="classCgnDI.html" title="Offers convenient digital-in buffering. ">CgnDI</a> class offers an easy way for such input monitoring in behavioral tasks. At construction, <a class="el" href="classCgnDI.html" title="Offers convenient digital-in buffering. ">CgnDI</a> class prepares multiple pins as pulled-up digital inputs using <code>INPUT_PULLUP</code>. Maximal number of pins for one instance of this class is determined by a constant <code>N_CGNDI</code>. Every time <code>update</code> is called, <a class="el" href="classCgnDI.html" title="Offers convenient digital-in buffering. ">CgnDI</a> class read the current values of the input pins. These values can be checked by <code>on</code> and <code>off</code> methods, which returns <code>true</code> when the button is pressed (i.e., the pin is connected to GND by the switch), and <code>false</code> when it is not pressed (i.e., the pin is connected to 5V through pull-up registor). In other words, original negative logic values (<code>LOW/HIGH</code> for switch's on/off, respectively) read by <code>digitalRead</code> function are converted to <code>true/false</code> boolean with a translation to a positive logic. Also <a class="el" href="classCgnDI.html" title="Offers convenient digital-in buffering. ">CgnDI</a> class remembers the previous values of the pins in a buffer. Thus you can check if the value was changed at the time of last <code>update</code> call by just performing <code>turnon</code> and <code>turnoff</code> methods. Because of this operation mechanism, <code>update</code> method is intended to be performed once (and normally only once) in every loop which is repeated in reasonablly quick cycles (usually a few milliseconds will be enough, but it depends on situation of each experiment).</p>
<p><a class="el" href="classCgnDI.html" title="Offers convenient digital-in buffering. ">CgnDI</a> class relays the current values of digital inputs to other set of digital-out pins, when dedicated pin numbers for this facility is designated. This can be used to relay the buttons' on/off state to other measurement instruments. <a class="el" href="classCgnDI.html" title="Offers convenient digital-in buffering. ">CgnDI</a> class also has a so called debounce mechanism. This is a (in the case of cgnuino library) software mechanism that conquer the short, unstable input fluctuation at the very moment of switch opening and closing. High flequent alteration of high/low voltage, called chattering or ripple, is problematic since Arduino may misregard it as multiple numbers of (really really) quick turing on and off of the switch. To prevent it, <a class="el" href="classCgnDI.html" title="Offers convenient digital-in buffering. ">CgnDI</a> class omits input from a digital-in pin right after once a change occured (by default a few milliseconds), discarding possible chattering input during this period. Although absolute amount of time this silencing takes place is universal to all the pins for a given <a class="el" href="classCgnDI.html" title="Offers convenient digital-in buffering. ">CgnDI</a> instance, actual omission is performed separately for each pin. In other words, if a change has occured to a given pin, succeeding input from that same pin is omitted for a short period, but inputs from other pins are regularly received and accessible. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="DI_8ino-example.html#_a0">DI.ino</a>, and <a class="el" href="SeqResp_8ino-example.html#_a1">SeqResp.ino</a>.</dd>
</dl></div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a65c74487fcfa1f0073476ac6d1e7fc24"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CgnDI::CgnDI </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>firstPin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>numberOfInputs</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>relaidPin</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>debounceMs</em> = <code>2</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">firstPin</td><td>First pin number for digital-in pins. </td></tr>
    <tr><td class="paramname">numberOfInputs</td><td>Number of digital inputs in use. </td></tr>
    <tr><td class="paramname">relaidPin</td><td>First pin number for relaied output pins if needed. </td></tr>
    <tr><td class="paramname">debounceMs</td><td>Delay intervened after a bit change in [ms]. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a21994237460bd0be25a523173e2ba165"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CgnDI::change </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>i</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Index of input you want to check. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a38722814960c6459e78e822ee064081d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CgnDI::keep </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>i</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Index of input you want to check. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a398a749f1f599f8c2076be7b8ea0f1c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CgnDI::off </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>i</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Index of input you want to check. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6aa03d3373b19a730ebe60c63102e2de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CgnDI::on </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>i</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Index of input you want to check. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aca8bab4f93ed7c9c4aa184de62b2b50f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CgnDI::turnoff </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>i</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Index of input you want to check. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="DI_8ino-example.html#a3">DI.ino</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ab177debb1d0d973696230aeabf478b53"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CgnDI::turnon </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>i</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Index of input you want to check. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="DI_8ino-example.html#a2">DI.ino</a>, and <a class="el" href="SeqResp_8ino-example.html#a3">SeqResp.ino</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a95e8d70a404b9d6b05c562cc293ec39c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CgnDI::update </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd>For a normal usage, this method is intended to be called once, and only once, inside <code>loop</code> function. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="DI_8ino-example.html#a1">DI.ino</a>, and <a class="el" href="SeqResp_8ino-example.html#a2">SeqResp.ino</a>.</dd>
</dl>
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="cgnuino_8h_source.html">cgnuino.h</a></li>
<li>src/CgnDI.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Feb 14 2021 10:04:27 for cgnuino by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
